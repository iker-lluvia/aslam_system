<!-- Launch file for ASLAM system-->
<launch>

  <!-- Widowx turret -->
  <include file="$(find aslam_bringup)/launch/widowx_turret/widowx_turret_controller.launch" />

  <!-- RealSense D435 -->
  <include file="$(find aslam_bringup)/launch/realsense/rs_d435.launch" />

  <!-- Load the URDF into the ROS Parameter Server -->
  <param name="robot_description"
         command="$(find xacro)/xacro.py '$(find aslam_bringup)/urdf/widowx_turret_rs_d435.urdf.xacro'"/>
  <!--  <node name="joint_state_publisher_gui" pkg="joint_state_publisher_gui" type="joint_state_publisher_gui" />-->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>

  <!--  Rviz visualizer  -->
  <node name="rviz" pkg="rviz" type="rviz"
        args="-d $(find aslam_bringup)/rviz/widowx_turret_rs_d435.rviz"/>
        
        
        
        
        <!-- 3D uncertainty map -->
  <node pkg="octomap_server" type="octomap_uncertainty_server_node" name="octomap_server">
    <remap from="cloud_in" to="/camera/depth/color/points" />

    <param name="frame_id" type="string" value="turret_base" />
    <param name="base_frame_id" type="string" value="turret_base" />
    <param name="height_map" value="false" />
    <param name="colored_map" value="false" />
    <param name="uncertainty_map" value="true" />
    <param name="occupied_only_uncertainty" value="true" />
    <param name="resolution" value="0.1" />
    <param name="sensor_model/max_range" value="4.0" />
    <param name="sensor_model/min_range" value="0.5" />
    <param name="color/r" value="0.0" />
    <param name="color/g" value="0.0" />
    <param name="color/b" value="1.0" />
    <param name="color/a" value="1.0" />
    <param name="publish_free_space" value="false" />
    <param name="color_free/r" value="0.0" />
    <param name="color_free/g" value="1.0" />
    <param name="color_free/b" value="0.0" />
    <param name="color_free/a" value="1.0" />
  </node>
  
</launch>
